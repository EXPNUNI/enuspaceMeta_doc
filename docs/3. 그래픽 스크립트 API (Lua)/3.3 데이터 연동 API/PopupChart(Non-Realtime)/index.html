<h1 id="lua-api">Lua API</h1>

<h2 id="popupchartchartnamedatacharttype">PopupChart(<code class="language-plaintext highlighter-rouge">ChartName</code>,<code class="language-plaintext highlighter-rouge">Data</code>,<code class="language-plaintext highlighter-rouge">ChartType</code>)</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- 데이터를 정해진 형식으로 전달하여 차트를 띄웁니다.
</code></pre></div></div>

<p><br /></p>

<h3 id="parameter-인자">Parameter (인자)</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Name</th>
      <th style="text-align: center">Type</th>
      <th style="text-align: left">Description</th>
      <th style="text-align: center">Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">ChartName</code></td>
      <td style="text-align: center">string</td>
      <td style="text-align: left">차트 ID</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">Data</code></td>
      <td style="text-align: center">string</td>
      <td style="text-align: left">차트로 가시화 할 데이터</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center"><code class="language-plaintext highlighter-rouge">ChartType</code></td>
      <td style="text-align: center">string</td>
      <td style="text-align: left">차트 타입(Line, Bar…)</td>
      <td style="text-align: center"> </td>
    </tr>
  </tbody>
</table>

<h3 id="return-반환값">Return (반환값)</h3>

<pre><code class="language-Json">팝업창에 차트를 가시화합니다.
</code></pre>

<h3 id="remark-주의사항">Remark (주의사항)</h3>
<ul>
  <li><code class="language-plaintext highlighter-rouge">ChartName</code>은 고유 차트 ID로, 중복되는 차트가 있다면 기존 차트가 사라지고 새로운 차트로 대체됩니다.</li>
  <li>AddChartSeries 함수를 통하여 태그를 추가할 때, 해당 <code class="language-plaintext highlighter-rouge">ChartName</code>의 차트에 태그가 추가됩니다.</li>
  <li><code class="language-plaintext highlighter-rouge">Data</code>는 GetTagHistory를 통하여 전달받은 데이터를 json으로 변환하여 정적인 데이터를 작성합니다.</li>
</ul>

<h3 id="example-함수사용-예시">Example (함수사용 예시)</h3>

<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">function</span> <span class="nf">_onclick</span><span class="p">()</span>
        <span class="kd">local</span> <span class="n">data</span> <span class="o">=</span> <span class="n">GetTagHistory</span><span class="p">(</span><span class="s1">'DB TABLE'</span><span class="p">,</span><span class="s1">'TAG'</span><span class="p">,</span><span class="s1">'2024-04-01T15:40:00Z'</span><span class="p">,</span><span class="s1">'2024-04-07T15:45:00Z'</span><span class="p">,</span> <span class="mi">100000</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">decoded_data</span> <span class="o">=</span> <span class="n">Json</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="kd">local</span> <span class="n">json_data</span> <span class="o">=</span> <span class="n">decoded_data</span><span class="p">.</span><span class="n">DATA</span>
        <span class="kd">local</span> <span class="n">json_string</span> <span class="o">=</span> <span class="n">Json</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="n">json_data</span><span class="p">)</span>
        <span class="n">PopupChart</span><span class="p">(</span><span class="n">chartname</span><span class="p">,</span> <span class="n">json_string</span><span class="p">,</span><span class="s1">'line'</span><span class="p">)</span>
    <span class="k">end</span>
</code></pre></div></div>
